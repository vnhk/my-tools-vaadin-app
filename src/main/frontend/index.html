<!DOCTYPE html>
<!--
This file is auto-generated by Vaadin.
-->

<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- OverlayScrollbars for custom scrollbars (Safari compatible) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.4.5/styles/overlayscrollbars.min.css" />

  <style>
    body, #outlet {
      height: 100vh;
      width: 100%;
      margin: 0;
    }

    /* OverlayScrollbars custom theme styling */
    .os-scrollbar {
      --os-size: 10px;
      --os-padding-perpendicular: 2px;
      --os-padding-axis: 2px;
    }

    .os-scrollbar-handle {
      background: var(--scrollbar-thumb, rgba(128, 128, 128, 0.5)) !important;
      border-radius: 5px !important;
    }

    .os-scrollbar-handle:hover,
    .os-scrollbar-handle:active {
      background: var(--scrollbar-thumb-hover, rgba(128, 128, 128, 0.7)) !important;
    }

    .os-scrollbar-track {
      background: var(--scrollbar-track, rgba(0, 0, 0, 0.1)) !important;
      border-radius: 5px !important;
    }

    /* Force hide ALL native scrollbars - Safari fix */
    html, body, .os-viewport, .os-content {
      scrollbar-width: none !important;  /* Firefox */
      -ms-overflow-style: none !important;  /* IE/Edge */
    }

    html::-webkit-scrollbar,
    body::-webkit-scrollbar,
    .os-viewport::-webkit-scrollbar,
    .os-content::-webkit-scrollbar,
    [data-overlayscrollbars]::-webkit-scrollbar,
    [data-overlayscrollbars-viewport]::-webkit-scrollbar {
      display: none !important;
      width: 0 !important;
      height: 0 !important;
      background: transparent !important;
    }

    [data-overlayscrollbars-initialize],
    [data-overlayscrollbars] {
      overflow: hidden !important;
    }

    .os-viewport {
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none !important;
    }
  </style>
  <!-- index.ts is included here automatically (either by the dev server or during the build) -->
</head>
<body>
  <!-- This outlet div is where the views are rendered -->
  <div id="outlet"></div>

  <!-- OverlayScrollbars JS (IIFE version for better Safari compatibility) -->
  <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.4.5/browser/overlayscrollbars.browser.es5.min.js"></script>
  <script>
    (function() {
      function initOverlayScrollbars() {
        if (typeof OverlayScrollbarsGlobal === 'undefined') {
          console.warn('OverlayScrollbars not loaded');
          return;
        }

        var OverlayScrollbars = OverlayScrollbarsGlobal.OverlayScrollbars;

        // Initialize on body
        OverlayScrollbars(document.body, {
          scrollbars: {
            theme: 'os-theme-custom',
            autoHide: 'leave',
            autoHideDelay: 800
          }
        });

        console.log('OverlayScrollbars initialized on body');

        // Watch for Vaadin app-layout and initialize on its content
        var observer = new MutationObserver(function(mutations) {
          // Main content area
          var appLayout = document.querySelector('vaadin-app-layout');
          if (appLayout && !appLayout.hasAttribute('data-os-init')) {
            appLayout.setAttribute('data-os-init', 'true');

            // Drawer
            var drawer = appLayout.querySelector('[slot="drawer"]');
            if (drawer && !drawer.hasAttribute('data-os-init')) {
              drawer.setAttribute('data-os-init', 'true');
              OverlayScrollbars(drawer, {
                scrollbars: { theme: 'os-theme-custom', autoHide: 'leave' }
              });
              console.log('OverlayScrollbars initialized on drawer');
            }
          }

          // Any element with data-custom-scrollbar attribute
          var customElements = document.querySelectorAll('[data-custom-scrollbar]:not([data-os-init])');
          for (var i = 0; i < customElements.length; i++) {
            var el = customElements[i];
            el.setAttribute('data-os-init', 'true');
            OverlayScrollbars(el, {
              scrollbars: { theme: 'os-theme-custom', autoHide: 'leave' }
            });
          }
        });

        observer.observe(document.body, { childList: true, subtree: true });
      }

      // Wait for DOM and a bit more for Safari
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', function() {
          setTimeout(initOverlayScrollbars, 100);
        });
      } else {
        setTimeout(initOverlayScrollbars, 100);
      }
    })();
  </script>
</body>
</html>
